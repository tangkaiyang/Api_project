{"remainingRequest":"/Users/wangzijia/Api_project/v_project/node_modules/thread-loader/dist/cjs.js!/Users/wangzijia/Api_project/v_project/node_modules/babel-loader/lib/index.js!/Users/wangzijia/Api_project/v_project/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzijia/Api_project/v_project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzijia/Api_project/v_project/src/views/Power_list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzijia/Api_project/v_project/src/views/Power_list.vue","mtime":1656847042258},{"path":"/Users/wangzijia/Api_project/v_project/babel.config.js","mtime":1653811334836},{"path":"/Users/wangzijia/Api_project/v_project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzijia/Api_project/v_project/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzijia/Api_project/v_project/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangzijia/Api_project/v_project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzijia/Api_project/v_project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Menu from \"../components/Menu\";\nimport axios from 'axios';\nexport default {\n  data: function data() {\n    return {\n      dialogFormVisible: false,\n      power_list_data: [],\n      form_data: {\n        id: '',\n        name: '',\n        users: '',\n        path: ''\n      },\n      all_users: [],\n      all_paths: ''\n    };\n  },\n  methods: {\n    open_power: function open_power(index) {\n      this.form_data = this.power_list_data[index];\n      this.dialogFormVisible = true;\n    },\n    add_power: function add_power() {\n      var _this = this;\n\n      axios.get('http://localhost:8000/add_power/').then(function (res) {\n        _this.power_list_data = res.data.power_list_data;\n      });\n    },\n    delete_power: function delete_power(id) {\n      var _this2 = this;\n\n      axios.get('http://localhost:8000/delete_power/', {\n        params: {\n          id: id\n        }\n      }).then(function (res) {\n        _this2.power_list_data = res.data.power_list_data;\n      });\n    },\n    save_power: function save_power() {\n      var _this3 = this;\n\n      axios.post('http://localhost:8000/save_power/', this.form_data).then(function (res) {\n        _this3.power_list_data = res.data.power_list_data;\n        _this3.dialogFormVisible = false;\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this4 = this;\n\n    axios.get('http://localhost:8000/get_power_list/').then(function (res) {\n      _this4.power_list_data = res.data.power_list_data;\n      _this4.all_users = res.data.all_users;\n      _this4.all_paths = res.data.all_paths;\n    });\n  },\n  components: {\n    Menu: Menu\n  }\n};",{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA;AACA;AACA;EACAA,IADA,kBACA;IACA;MACAC,wBADA;MAEAC,mBAFA;MAGAC;QACAC,MADA;QAEAC,QAFA;QAGAC,SAHA;QAIAC;MAJA,CAHA;MASAC,aATA;MAUAC;IAVA;EAYA,CAdA;EAeAC;IACAC,UADA,sBACAC,KADA,EACA;MACA;MACA;IACA,CAJA;IAKAC,SALA,uBAKA;MAAA;;MACAC;QACA;MACA,CAFA;IAGA,CATA;IAUAC,YAVA,wBAUAX,EAVA,EAUA;MAAA;;MACAU;QACAE;UACAZ;QADA;MADA,GAIAa,IAJA,CAIA;QACA;MACA,CANA;IAOA,CAlBA;IAmBAC,UAnBA,wBAmBA;MAAA;;MACAJ;QACA;QACA;MACA,CAHA;IAIA;EAxBA,CAfA;EAyCAK,OAzCA,qBAyCA;IAAA;;IACAL,wDACA;MACA;MACA;MACA;IACA,CALA;EAOA,CAjDA;EAkDAM;IACAC;EADA;AAlDA","names":["data","dialogFormVisible","power_list_data","form_data","id","name","users","path","all_users","all_paths","methods","open_power","index","add_power","axios","delete_power","params","then","save_power","mounted","components","Menu"],"sourceRoot":"src/views","sources":["Power_list.vue"],"sourcesContent":["<template>\n    <div>\n        <el-container>\n            <el-aside style=\" width: 200px;\">\n                <Menu></Menu>\n            </el-aside>\n            <el-main>\n                <h1>权限管理 <span style=\"color: grey;font-size: xx-small\">（本页面仅超管可用！）</span></h1>\n\n                <el-table\n                    :data=\"power_list_data\"\n                    stripe\n                    border\n                    style=\"max-width: 70%;min-height: 100%;overflow-y: auto;float: left\"\n\n                >\n                    <el-table-column\n                        prop=\"id\"\n                        label=\"ID\"\n                        width=\"50\"\n                    >\n                    </el-table-column>\n\n                    <el-table-column\n                        prop=\"name\"\n                        label=\"名称\"\n                    >\n                    </el-table-column>\n\n                    <el-table-column\n                        prop=\"path\"\n                        label=\"监管路由\"\n                        width=\"200\"\n                    >\n\n                    </el-table-column>\n\n\n\n                    <el-table-column\n                     width=\"200\"\n                    >\n                        <template slot=\"header\">\n                            <el-button @click=\"add_power\">新增权限</el-button>\n                        </template>\n                        <template slot-scope=\"scope\">\n                            <el-button size=\"mini\" type=\"primary\"  @click=\"open_power(scope.$index)\">编辑</el-button>\n                            <el-button size=\"mini\" type=\"danger\"  @click=\"delete_power(scope.row.id)\">删除</el-button>\n                        </template>\n                    </el-table-column>\n\n                </el-table>\n\n                <el-input\n                    type=\"textarea\"\n                    :rows=\"30\"\n                    style=\"position: fixed;right: 10px;max-width: 25%;box-shadow: 4px 4px 10px gray\"\n                    v-model=\"all_paths\"\n                ></el-input>\n            </el-main>\n        </el-container>\n\n        <el-dialog title=\"编辑权限\" :visible.sync=\"dialogFormVisible\">\n            <el-form :model=\"form_data\">\n                <el-form-item label=\"权限id\" label-width=\"80px\">\n                    <el-input disabled=\"\" v-model=\"form_data.id\"></el-input>\n                </el-form-item>\n\n                <el-form-item label=\"权限名称\" label-width=\"80px\">\n                    <el-input v-model=\"form_data.name\"></el-input>\n                </el-form-item>\n\n                <el-form-item label=\"管控path\" label-width=\"80px\">\n                    <el-input v-model=\"form_data.path\"></el-input>\n                </el-form-item>\n\n                <el-form-item label=\"人员\" label-width=\"80px\">\n\n                    <el-select v-model=\"form_data.users\" multiple placeholder=\"请选择\" style=\"width: 100%\">\n                        <el-option\n                            v-for=\"i in all_users\"\n                            :key=\"i.id\"\n                            :label=\"i.id+'-'+i.username+'-'+i.title\"\n                            :value=\"i.id+'-'+i.username+'-'+i.title\"\n                        ></el-option>\n                    </el-select>\n\n                </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"save_power\">保 存</el-button>\n              </div>\n        </el-dialog>\n\n    </div>\n</template>\n\n<script>\n    import Menu from '../components/Menu'\n    import axios from 'axios'\n    export default {\n        data(){\n          return{\n              dialogFormVisible:false,\n              power_list_data:[],\n              form_data:{\n                  id:'',\n                  name:'',\n                  users:'',\n                  path:''\n              },\n              all_users:[],\n              all_paths:'',\n            }\n        },\n        methods:{\n             open_power(index){\n                 this.form_data = this.power_list_data[index];\n                 this.dialogFormVisible = true;\n             },\n            add_power(){\n                 axios.get('http://localhost:8000/add_power/').then(res=>{\n                     this.power_list_data = res.data.power_list_data\n                 })\n            },\n            delete_power(id){\n                 axios.get('http://localhost:8000/delete_power/',{\n                     params:{\n                         id : id\n                     }\n                 }).then(res=>{\n                     this.power_list_data = res.data.power_list_data\n                 })\n            },\n            save_power(){\n                 axios.post('http://localhost:8000/save_power/',this.form_data).then(res=>{\n                      this.power_list_data = res.data.power_list_data;\n                      this.dialogFormVisible = false;\n                 })\n            }\n        },\n        mounted(){\n            axios.get('http://localhost:8000/get_power_list/').then(\n                res=>{\n                    this.power_list_data = res.data.power_list_data;\n                    this.all_users = res.data.all_users;\n                    this.all_paths = res.data.all_paths;\n                }\n            )\n        },\n        components:{\n            Menu\n        }\n    }\n</script>\n\n<style scoped>\n .el-aside {\n    background-color: #D3DCE6;\n    color: #333;\n    text-align: center;\n\n  }\n  .el-main {\n    background-color: white;\n    color: #333;\n  }\n</style>"]}]}