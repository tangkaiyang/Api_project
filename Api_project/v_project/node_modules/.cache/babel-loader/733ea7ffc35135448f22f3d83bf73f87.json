{"remainingRequest":"/Users/wangzijia/Api_project/v_project/node_modules/thread-loader/dist/cjs.js!/Users/wangzijia/Api_project/v_project/node_modules/babel-loader/lib/index.js!/Users/wangzijia/Api_project/v_project/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzijia/Api_project/v_project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzijia/Api_project/v_project/src/views/Send_news.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzijia/Api_project/v_project/src/views/Send_news.vue","mtime":1656240766511},{"path":"/Users/wangzijia/Api_project/v_project/babel.config.js","mtime":1653811334836},{"path":"/Users/wangzijia/Api_project/v_project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzijia/Api_project/v_project/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzijia/Api_project/v_project/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangzijia/Api_project/v_project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzijia/Api_project/v_project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Menu from \"../components/Menu\";\nimport axios from 'axios';\nexport default {\n  data: function data() {\n    return {\n      content: '',\n      restaurants: [],\n      state1: '',\n      to_user_list: [],\n      to_user_id: '',\n      news: []\n    };\n  },\n  methods: {\n    querySearch: function querySearch(queryString, cb) {\n      var restaurants = this.restaurants;\n      var results = queryString ? restaurants.filter(this.createFilter(queryString)) : restaurants; // 调用 callback 返回建议列表的数据\n\n      cb(results);\n    },\n    createFilter: function createFilter(queryString) {\n      return function (restaurant) {\n        return restaurant.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0;\n      };\n    },\n    loadAll: function loadAll() {\n      return this.to_user_list;\n    },\n    handleSelect: function handleSelect(item) {\n      this.to_user_id = item.id;\n    },\n    send_news: function send_news() {\n      var _this = this;\n\n      axios.post('http://localhost:8000/send_news/', {\n        'content': this.content,\n        'to_user_id': this.to_user_id\n      }).then(function (res) {\n        _this.$message({\n          message: '发送消息成功',\n          type: 'success'\n        });\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    axios.get('http://localhost:8000/get_to_user_list/').then(function (res) {\n      _this2.to_user_list = res.data.to_user_list;\n      _this2.news = res.data.news;\n      _this2.restaurants = _this2.loadAll();\n    });\n  },\n  components: {\n    Menu: Menu\n  }\n};",{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;EACAA,IADA,kBACA;IACA;MACAC,WADA;MAEAC,eAFA;MAGAC,UAHA;MAIAC,gBAJA;MAKAC,cALA;MAMAC;IANA;EAQA,CAVA;EAWAC;IACAC,WADA,uBACAC,WADA,EACAC,EADA,EACA;MACA;MACA,6FAFA,CAGA;;MACAA;IACA,CANA;IAOAC,YAPA,wBAOAF,WAPA,EAOA;MACA;QACA;MACA,CAFA;IAGA,CAXA;IAYAG,OAZA,qBAYA;MACA;IACA,CAdA;IAeAC,YAfA,wBAeAC,IAfA,EAeA;MACA;IACA,CAjBA;IAkBAC,SAlBA,uBAkBA;MAAA;;MACAC;QAAA;QAAA;MAAA;QACA;UACAC,iBADA;UAEAC;QAFA;MAIA,CALA;IAMA;EAzBA,CAXA;EAsCAC,OAtCA,qBAsCA;IAAA;;IACAH;MACA;MACA;MACA;IACA,CAJA;EAOA,CA9CA;EA+CAI;IACAC;EADA;AA/CA","names":["data","content","restaurants","state1","to_user_list","to_user_id","news","methods","querySearch","queryString","cb","createFilter","loadAll","handleSelect","item","send_news","axios","message","type","mounted","components","Menu"],"sourceRoot":"src/views","sources":["Send_news.vue"],"sourcesContent":["<template>\n    <div style=\"height: 100%\">\n       <el-container style=\"height: 100%\">\n           <el-aside style=\"width: 200px\">\n                <Menu></Menu>\n           </el-aside>\n\n           <el-main>\n                <h1>发送消息</h1>\n\n               <el-input\n                type=\"textarea\"\n                :rows=\"5\"\n                placeholder=\"请输入消息内容\"\n                v-model=\"content\"\n               >\n               </el-input>\n               <br>\n               <br>\n\n               <el-autocomplete\n                  class=\"inline-input\"\n                  v-model=\"state1\"\n                  :fetch-suggestions=\"querySearch\"\n                  placeholder=\"输入接收者用户名\"\n                  @select=\"handleSelect\"\n                  :trigger-on-focus=\"true\"\n                  style=\"float: left;width: 500px\"\n\n                >\n                    <template slot-scope=\"{ item }\">\n                        <div style=\"color: #0a2d8f\"><strong>用户名：{{item.username}}</strong></div>\n                        <img onerror=\"this.src='/static/user_avatar/default.png'\" class=\"avatar\" style=\"float: left;width: 50px;height: 50px\" :src=\"'/static/user_avatar/userImg_'+item.id+'.jpg'\" alt=\"\">\n                        <span style=\"color: gray;font-size: xx-small\">【ID: {{item.id}}】</span>\n                        <span style=\"color: gray;font-size: xx-small\">【{{item.first_name}}】</span>\n                        <el-divider></el-divider>\n                    </template>\n               </el-autocomplete>\n\n\n               &#12288;<el-button @click=\"send_news\" type=\"primary\" plain=\"\">发送消息</el-button>\n\n               <br><br>\n\n           <el-card class=\"box-card\" style=\"overflow-y: auto;width: 100%;min-height: -webkit-calc(100% - 280px)\">\n              <div slot=\"header\" class=\"clearfix\">\n                <span>历史消息</span>\n              </div>\n                <div v-for=\"o in news\" class=\"text item\">\n                    <span style=\"color: gray\">发送者：【 {{o.from_user_name}} 】</span>\n                    <span style=\"color: #8c939d;font-size: xx-small\">（{{o.date}}）</span>\n                    <br><br>\n                    <strong>{{o.content}}</strong>\n                    <el-divider></el-divider>\n                </div>\n            </el-card>\n\n\n\n           </el-main>\n       </el-container>\n    </div>\n</template>\n\n<script>\n    import Menu from '../components/Menu'\n    import axios from 'axios'\n    export default {\n        data(){\n            return{\n                content:'',\n                restaurants: [],\n                state1: '',\n                to_user_list:[],\n                to_user_id:'',\n                news:[],\n            }\n        },\n        methods:{\n            querySearch(queryString, cb) {\n                var restaurants = this.restaurants;\n                var results = queryString ? restaurants.filter(this.createFilter(queryString)) : restaurants;\n                // 调用 callback 返回建议列表的数据\n                cb(results);\n              },\n              createFilter(queryString) {\n                return (restaurant) => {\n                  return (restaurant.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\n                };\n              },\n              loadAll() {\n                return this.to_user_list\n              },\n              handleSelect(item) {\n                this.to_user_id = item.id\n              },\n             send_news(){\n                axios.post('http://localhost:8000/send_news/',{'content':this.content,'to_user_id':this.to_user_id}).then(res=>{\n                    this.$message({\n                        message:'发送消息成功',\n                        type:'success'\n                    })\n                })\n             }\n        },\n        mounted(){\n            axios.get('http://localhost:8000/get_to_user_list/').then(res=>{\n                this.to_user_list = res.data.to_user_list;\n                this.news = res.data.news;\n                this.restaurants = this.loadAll();\n            });\n\n\n        },\n        components:{\n            Menu\n        }\n    }\n</script>\n<style >\n .el-aside {\n    background-color: #D3DCE6;\n    color: #333;\n    text-align: center;\n\n  }\n  .el-main {\n    background-color: white;\n    color: #333;\n  }\n</style>"]}]}