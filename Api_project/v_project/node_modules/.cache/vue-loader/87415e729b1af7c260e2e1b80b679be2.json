{"remainingRequest":"/Users/wangzijia/Api_project/v_project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzijia/Api_project/v_project/src/views/Monitor.vue?vue&type=style&index=0&id=27b451e0&scoped=true&lang=css&","dependencies":[{"path":"/Users/wangzijia/Api_project/v_project/src/views/Monitor.vue","mtime":1661597569717},{"path":"/Users/wangzijia/Api_project/v_project/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/wangzijia/Api_project/v_project/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/wangzijia/Api_project/v_project/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/wangzijia/Api_project/v_project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzijia/Api_project/v_project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.el-aside {\n   background-color: #D3DCE6;\n   color: #333;\n   text-align: center;\n }\n .el-main {\n   background-color: white;\n   color: #333;\n }\n",{"version":3,"sources":["Monitor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Monitor.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div style=\"height: 100%\">\n        <el-container style=\"height: 100%\">\n            <el-aside  width=\"200px\">\n                <Menu></Menu>\n            </el-aside>\n            <el-main>\n                <h1>线上监控模块 (监控或定时等方式执行具体项目大用例)</h1>\n                <el-table\n                    :data=\"monitor_list\"\n                    stripe\n                    border\n                    style=\"min-height: 100%;min-width: 100%;overflow-y: auto\"\n                >\n                    <el-table-column\n                        prop=\"id\"\n                        label=\"ID\"\n                        width=\"100\"\n                    ></el-table-column>\n\n                     <el-table-column\n                        prop=\"label\"\n                        label=\"名称\"\n                        width=\"120\"\n                    ></el-table-column>\n\n                     <el-table-column\n                        prop=\"project_id\"\n                        label=\"项目id\"\n                        width=\"100\"\n                    ></el-table-column>\n\n                     <el-table-column\n                        label=\"状态\"\n                        width=\"100\"\n                    >\n                         <template slot-scope=\"scope\">\n                             <span :style=\"{color:getColor(scope.row.status)}\">{{ scope.row.status }}</span>\n                         </template>\n                     </el-table-column>\n\n                     <el-table-column\n                        prop=\"next_date\"\n                        label=\"下次执行时间\"\n                        width=\"150\"\n                    ></el-table-column>\n\n                     <el-table-column>\n                         <template slot=\"header\">\n                             <el-button @click=\"add_monitor\">新增监控</el-button>\n                         </template>\n                         <template slot-scope=\"scope\">\n                             <el-button @click=\"change_monitor_status(scope.row.id)\" size=\"mini\" type=\"success\" >开关</el-button>\n                             <el-button @click=\"look_reports(scope.row.project_id)\" size=\"mini\" type=\"default\" >历史报告</el-button>\n                             <el-button @click=\"set_monitor(scope.$index)\" size=\"mini\" type=\"default\" >编辑</el-button>\n                             <el-button @click=\"delete_monitor(scope.row.id)\" size=\"mini\" type=\"danger\" >删除</el-button>\n                         </template>\n                     </el-table-column>\n\n\n                </el-table>\n            </el-main>\n        </el-container>\n\n        <el-dialog :visible.sync=\"dialogFormVisible\" width=\"90%\">\n            <el-form :model=\"form_data\">\n                <el-form-item label=\"监控名称\" label-width=\"120px\">\n                    <el-input v-model=\"form_data.label\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"关联项目id\" label-width=\"120px\">\n                    <el-input v-model=\"form_data.project_id\"></el-input>\n                </el-form-item>\n\n                <el-form-item label=\"监控方式\" label-width=\"120px\">\n                    <el-radio-group v-model=\"form_data.method\" @change=\"chang_jkfs\">\n                        <el-radio label=\"间隔时间\">间隔(分)</el-radio>\n                        <el-radio label=\"每日定时\">每日定时(24小时制如：17:22)</el-radio>\n                        <el-radio label=\"接口触发\">接口触发(不可修改)</el-radio>\n                        <el-radio label=\"jenkins语法\">jenkins语法</el-radio>\n                    </el-radio-group>\n                </el-form-item>\n\n                <el-form-item label=\"设置值\" label-width=\"120px\">\n                    <el-input v-model=\"form_data.value\" placeholder=\"请输入对应方式的值\"></el-input>\n                </el-form-item>\n\n                <el-form-item label=\"邮件接收地址\" label-width=\"120px\">\n                    <el-input v-model=\"form_data.email\" placeholder=\"多个用英文逗号,隔开\"></el-input>\n                </el-form-item>\n\n                <el-form-item label=\"机器人\" label-width=\"120px\">\n                    <el-input v-model=\"form_data.robot\"></el-input>\n                </el-form-item>\n            </el-form>\n\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogFormVisible=false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"save_monitor\">保 存</el-button>\n            </div>\n\n\n        </el-dialog>\n\n        <el-dialog :visible.sync=\"dialogFormVisible2\" width=\"600px\">\n            <Report :project_id=\"look_report_project_id\" v-if=\"dialogFormVisible2\"></Report>\n        </el-dialog>\n\n    </div>\n</template>\n\n<script>\n    import axios from 'axios'\n    import Menu from '../components/Menu'\n    import Report from '../components/Report'\n\n    export default {\n        name: \"Monitor\",\n        data(){\n            return{\n                dialogFormVisible:false,\n                dialogFormVisible2:false,\n                look_report_project_id:'',\n                  monitor_list:[],\n                  form_data:{\n                  }\n            }\n        },\n        mounted(){\n            axios.get('/get_monitor_list/').then(res=>{\n                this.monitor_list = res.data\n            })\n        },\n        methods:{\n             getColor(result){\n                if( result.toString() == 'true'){\n                    return 'green'\n                }else{\n                    return 'red'\n                }\n            },\n            chang_jkfs(){\n              this.form_data.value = '';\n              if(this.form_data.method == '接口触发'){\n                this.form_data.value = process.env.VUE_APP_BASE_URL+'/run/?project_id='+this.form_data.project_id\n              }\n            },\n            add_monitor(){\n                axios.get('/add_monitor/').then(res=>{\n                    this.monitor_list = res.data\n                })\n            },\n            change_monitor_status(id){\n                axios.get('/change_monitor_status/',{\n                    params:{\n                        id:id\n                    }\n                }).then(res=>{\n                    this.monitor_list = res.data\n                })\n            },\n            look_reports(project_id){\n                this.dialogFormVisible2 = true;\n                this.look_report_project_id = project_id\n            },\n            set_monitor(index){\n                this.dialogFormVisible = true;\n                this.form_data = this.monitor_list[index];\n            },\n            delete_monitor(id){\n                axios.get('/delete_monitor/',{\n                    params:{\n                        id:id\n                    }\n                }).then(res=>{\n                     this.monitor_list = res.data\n                })\n            },\n            save_monitor(){\n                axios.post('/save_monitor/',this.form_data).then(res=>{\n                    this.monitor_list = res.data\n                    this.dialogFormVisible = false;\n                })\n            },\n        },\n        components:{\n            Menu,\n            Report\n        }\n\n    }\n</script>\n\n<style scoped>\n .el-aside {\n    background-color: #D3DCE6;\n    color: #333;\n    text-align: center;\n  }\n  .el-main {\n    background-color: white;\n    color: #333;\n  }\n</style>"]}]}